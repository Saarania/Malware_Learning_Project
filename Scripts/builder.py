import os
import shutil

import properties

shutil.rmtree("build", ignore_errors=True)
shutil.rmtree("dist", ignore_errors=True)
shutil.rmtree(os.path.join(properties.APPDATA_PATH, "status"), ignore_errors=True)

data_folder = os.path.join(properties.APPDATA_PATH,"web")
if os.path.exists(data_folder):
    for file in os.listdir(data_folder):
        if "BrowserData" not in str(file):
            filepath = os.path.join(data_folder, file)
            if os.path.isdir(os.path.join(data_folder, file)):
                shutil.rmtree(filepath)
            else:
                os.remove(filepath)

os.system(r"""pyinstaller -F -w -i "resource\favicon.ico" -n "Warning Too hot" --add-data "resource;resource" main.py""")